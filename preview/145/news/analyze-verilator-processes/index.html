<!doctype html><html lang=en-us>
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=5">
<link href=/preview/145/vendor/bootstrap/bootstrap.min.css rel=stylesheet>
<link href=/preview/145/vendor/phosphor-icons/css/phosphor.css rel=stylesheet>
<link href=/preview/145/vendor/magnific-popup/magnific-popup.css rel=stylesheet>
<link rel=stylesheet href=/preview/145/scss/theme.min.a5381c44cba9afddcecb1f5a7770e438e042e9a03f795caa7ee5af578c5025b5.css>
<link rel=icon href=/preview/145/images/favicon/cropped-favicon-1-32x32.png sizes=32x32>
<link rel=icon href=/preview/145/images/favicon/cropped-favicon-1-192x192.png sizes=192x192>
<link rel=apple-touch-icon href=/preview/145/images/favicon/cropped-favicon-1-180x180.png>
<meta name=msapplication-TileImage content="/preview/145/images/favicon/cropped-favicon-1-270x270.png">
<script src=https://cmp.osano.com/16A0DbT9yDNIaQkvZ/3b49aaa9-15ab-4d47-a8fb-96cc25b5543c/osano.js></script>
<title>Analyze Verilator processes and ASTs with the astsee suite | CHIPS Alliance</title>
<meta name=description content="Among other things, Antmicro’s work towards improving the vertical integration potential of customers designing ASIC solutions often sees them enhance …">
<meta property="og:title" content="Analyze Verilator processes and ASTs with the astsee suite">
<meta property="og:description" content="Among other things, Antmicro’s work towards improving the vertical integration potential of customers designing ASIC solutions often sees them enhance one of the flagship open source projects in this space, Verilator which complements - and in fact is often used alongside - Antmicro’s own functional simulation framework, Renode. Besides contributing bug fixes and other quality-of-life improvements into Verilator, Antmicro also develops new functionalities that expand its use cases towards e.g. UVM verification and continuously improve overall performance.">
<meta property="og:type" content="article">
<meta property="og:url" content="https://chipsalliance.org/preview/145/news/analyze-verilator-processes/"><meta property="og:image" content="https://chipsalliance.org/preview/145/news/analyze-verilator-processes/Verilator-helper-tools--blog-sm.png"><meta property="article:section" content="news">
<meta property="article:published_time" content="2024-03-18T00:00:00+00:00">
<meta property="article:modified_time" content="2024-03-18T00:00:00+00:00"><meta property="og:site_name" content="CHIPS Alliance">
<meta itemprop=name content="Analyze Verilator processes and ASTs with the astsee suite">
<meta itemprop=description content="Among other things, Antmicro’s work towards improving the vertical integration potential of customers designing ASIC solutions often sees them enhance one of the flagship open source projects in this space, Verilator which complements - and in fact is often used alongside - Antmicro’s own functional simulation framework, Renode. Besides contributing bug fixes and other quality-of-life improvements into Verilator, Antmicro also develops new functionalities that expand its use cases towards e.g. UVM verification and continuously improve overall performance."><meta itemprop=datePublished content="2024-03-18T00:00:00+00:00">
<meta itemprop=dateModified content="2024-03-18T00:00:00+00:00">
<meta itemprop=wordCount content="1007"><meta itemprop=image content="https://chipsalliance.org/preview/145/news/analyze-verilator-processes/Verilator-helper-tools--blog-sm.png">
<meta itemprop=keywords content><meta name=twitter:card content="summary_large_image">
<meta name=twitter:image content="https://chipsalliance.org/preview/145/news/analyze-verilator-processes/Verilator-helper-tools--blog-sm.png">
<meta name=twitter:title content="Analyze Verilator processes and ASTs with the astsee suite">
<meta name=twitter:description content="Among other things, Antmicro’s work towards improving the vertical integration potential of customers designing ASIC solutions often sees them enhance one of the flagship open source projects in this space, Verilator which complements - and in fact is often used alongside - Antmicro’s own functional simulation framework, Renode. Besides contributing bug fixes and other quality-of-life improvements into Verilator, Antmicro also develops new functionalities that expand its use cases towards e.g. UVM verification and continuously improve overall performance.">
<meta name=twitter:site content="@chipsalliance">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-H0KF2YZTR7"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-H0KF2YZTR7')</script>
</head>
<body>
<header>
<div class="lfprojects position-fixed">
<a href=https://www.linuxfoundation.org/projects target=_blank rel="noopener noreferrer"><img src=/preview/145/images/lf-projects-banner-white.svg></a>
</div>
<nav class="navbar navbar-expand-lg position-fixed w-100 zindex-dropdown" id=mainnavigationBar>
<a class=navbar-brand href=/preview/145/>
<img src=/preview/145/images/chips_alliance.svg alt=Nav-Logo>
</a>
<button class=navbar-toggler type=button data-bs-toggle=collapse data-bs-target=#navbarSupportedContent aria-controls=navbarSupportedContent aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-default><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><line x1="3.5" y1="5.5" x2="21.5" y2="5.5" stroke="#292d32" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/><line x1="4.5" y1="12.5" x2="21.5" y2="12.5" stroke="#292d32" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/><line x1="11.5" y1="19.5" x2="21.5" y2="19.5" stroke="#292d32" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/></svg>
</span>
<span class=navbar-toggler-toggled><svg width="20" height="20" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M21.5 6.5l-15 15" stroke="#404152" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/><path d="M21.5 21.5l-15-15" stroke="#404152" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/></svg>
</span>
</button>
<div class="collapse navbar-collapse" id=navbarSupportedContent>
<ul class="navbar-nav mx-auto mb-20 mb-lg-0 navbar-nav-scroll">
<li class="nav-item dropdown">
<div class="nav-link dropdown-toggle" data-toggle=dropdown aria-haspopup=true aria-expanded=false>
About
</div>
<div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink>
<a class=dropdown-item href=/preview/145/about/who-we-are/>Who We Are</a>
<a class=dropdown-item href=/preview/145/about/members/>Members</a>
<a class=dropdown-item href=/preview/145/about/governance/>Governance</a>
<a class=dropdown-item href=/preview/145/about/faq/>FAQ</a>
<a class=dropdown-item href=/preview/145/about/contact/>Contact</a>
</div>
</li>
<li class=nav-item>
<a class=nav-link href=/preview/145/projects/>
Projects
</a>
</li>
<li class=nav-item>
<a class=nav-link href=/preview/145/events/>
Events
</a>
</li>
<li class=nav-item>
<a class=nav-link href=/preview/145/workgroups/>
Workgroups
</a>
</li>
<li class="nav-item dropdown">
<div class="nav-link dropdown-toggle" data-toggle=dropdown aria-haspopup=true aria-expanded=false>
News
</div>
<div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink>
<a class=dropdown-item href=/preview/145/categories/announcements/>Announcements</a>
<a class=dropdown-item href=/preview/145/categories/blog/>Blog</a>
<a class=dropdown-item href=/preview/145/categories/reports/>Reports</a>
</div>
</li>
<li class=nav-item>
<a class=nav-link href=/preview/145/join/>
Join
</a>
</li>
</ul>
</div>
<div class="d-none d-lg-block">
<div class=nav-item>
<a href=/preview/145/getting-started/ class="btn btn-sm btn-primary">Get Started</a>
</div>
</div>
</nav>
</header>
<section class=blog-details>
<div class=container>
<div class=row>
<div class=col-lg-12>
<article class=blog-single>
<div class=inner-blog-details>
<h1>Analyze Verilator processes and ASTs with the astsee suite</h1>
<div class=inner-blog-details-meta>
<ul class=list-unstyled>
<li class=list-inline-item>
<p>March 18, 2024</p>
</li>
<li class=list-inline-item>
<p>5 <span>minutes</span></p>
</li>
<li class=list-inline-item>
<p>1007 <span>words</span></p>
</li>
</ul>
</div>
</div>
<div class="rounded-box mb-xxl-11 mb-8">
<img src=https://chipsalliance.org/preview/145/news/analyze-verilator-processes/Verilator-helper-tools--blog-sm.png class=w-100 alt=featured-image>
</div>
<div><p>Among other things, Antmicro’s work towards improving the vertical integration potential of customers designing ASIC solutions often sees them enhance one of the flagship open source projects in this space, Verilator which complements - and in fact is <a href=https://antmicro.com/blog/2023/09/dpi-support-in-renode-for-hdl-co-simulation-with-verilator-and-questa/>often used alongside</a> - Antmicro’s own functional simulation framework, <a href=https://about.renode.io>Renode</a>. Besides contributing bug fixes and other quality-of-life improvements into Verilator, Antmicro also develops new functionalities that <a href=https://antmicro.com/blog/2023/10/running-simple-uvm-testbenches-in-verilator/>expand its use cases towards e.g. UVM verification</a> and <a href=https://antmicro.com/blog/2023/09/accelerating-model-generation-in-verilator/>continuously improve overall performance</a>.</p>
<p>In this blog article, Antmicro describes some of the recent developments for Verilator - the –dump-tree-json flag and the new software suite called astsee, which provides a good foundation for developing new, advanced features for Verilator as well as debugging the simulator itself through the ability to look inside the verilation process as it unfolds.</p>
<p><img src=Verilator-helper-tools--CHIPS-Alliance-1.png alt="astsee logo"></p>
<h2 id=peek-into-verilation-at-each-stage-with-dump-tree-json>Peek into verilation at each stage with –dump-tree-json</h2>
<p>The process at the core of Verilator, called verilation, involves going from the original HDL code into corresponding C++ (which is later used to simulate the design) The first stage of this process aims at producing a structured representation of SystemVerilog code in the form of an Abstract Syntax Tree (AST) representation of the design before dozens of subsequent stages that parse the code, resolve references, resolve signal widths and perform various optimizations.</p>
<p><img src=Verilator-helper-tools--blog-CHIPS-Alliance-2.png alt="A representation of a typical syntax tree"></p>
<p>Finally, the AST is emitted as C++ code, which can then be compiled into a simulation binary. The stages related to scheduling play a crucial role here, as they convert the original AST from a more dataflow-like structure to an imperative one.</p>
<p>For debugging purposes, it can be useful to look inside the process of verilation in order to find errors. This is why Antmicro developed a new &ndash;dump-tree-json flag for Verilator, which can dump the AST from each verilation stage into a JSON representation, making it much easier to find the individual point of failure during the verilation process and to fix it accordingly. The flag offers more fine-grained control over the output than the preexisting &ndash;xml-only flag (by e.g. letting you examine the output of specific stages), and allows to analyze the output using a more modern format.</p>
<p>The advantage of using JSON is that - thanks to its popularity in web development, cloud and other fields - it is widely supported in the open source ecosystem through various tools, viewers and converters. JSON is also leaner and easier to read and the output from &ndash;dump-tree-json can therefore be handled in a variety of useful ways, including through our newly introduced astsee tool, described below.</p>
<h2 id=introducing-astsee>Introducing astsee</h2>
<p><img src=Verilator-helper-tools--blog-CHIPS-Alliance-3.png alt="A view of the diff generation process in astsee"></p>
<p>While being able to access raw JSON output from each verilation stage is useful, it still remains difficult to see patterns and points of failure when working with very large, complex and state-of the-art designs. This is particularly true when helping customers build production-grade chips that require incredible amounts of long-turnaround, compute-heavy workloads.</p>
<p>To get more insight into the internals of Verilator in their work, Antmicro developed <a href=https://github.com/antmicro/astsee>the astsee suite</a>, which provides a comprehensive toolkit for pretty-printing, diffing, and exploring ASTs from a wide range of sources (including, but not limited to, Verilator). Astsee can generate an interactive HTML document from JSON output with a diff view, which provides a way to easily compare the original AST dump with the JSON representation. It is also possible to view two generated JSON dumps and compare them. One particularly useful feature of astsee is the ability to highlight a given part of the output in one pane when comparing AST to JSON, which will automatically highlight the same output on the other pane.</p>
<p><img src=analyze-verilator-processes-and-asts--blog4.png alt="Interactive HTML diff view with JSON output"></p>
<p>Astsee also works as a plugin within <a href=https://www.sourceware.org/gdb/>GDB</a>, which allows users to invoke it for more granular dumps during the process of debugging in Verilator. Users can choose to execute astsee at any point during the verilation process, not only at the end of an individual stage, providing the possibility to identify and eradicate bugs that emerge during each stage of verilation. Currently, astsee only supports generic JSON trees, but support can be easily extended to other ASTs that have been exported into different formats as the suite operates functionally independently of other software.</p>
<p>Support for Verilator is specifically provided through <a href=https://github.com/antmicro/astsee/blob/main/astsee/verilator_cli.py>astsee_verilator</a>, a tool which harnesses the power of astsee and Verilator using the JSON dumps obtained from the aforementioned &ndash;dump-tree-json tool. This tool also helps analyze individual nodes within the generated AST, as they can contain multiple different and important values such as pointers and data types. With this specific knowledge of how the node is composed, it is possible to compare fields separately. Astsee therefore provides tangible benefits in terms of reducing development time, as it provides the Verilator AST output in a clean and structured order which can then be modified as required without requiring difficult and time consuming comparisons.</p>
<p><img src=astsee-gdb.gif alt="Analyze Verilator process and ASTs with the ASTEE suite"></p>
<h2 id=future-plans>Future plans</h2>
<p>We are working on pushing <a href=https://github.com/verilator/verilator/pull/4715>the support for JSON dumps into mainline Verilator</a>, and as a result of the discussions sparked by this work, it is possible that at some point Verilator will use JSON as the default serialization format, replacing the existing XML output and the &ndash;xml-only flag.</p>
<p>Since Antmicro is developing and optimizing a variety of tools as part of their work on a broad range of ASIC/FPGA, AI and hardware solutions for their customers, they will be able to use the fact that the astsee tooling suite is software agnostic to enable support/processing of ASTs generated in other use cases. The HTML and diff views are not dependent on the JSON format, and can be easily extended to output in XML or other proprietary formats.</p>
<h2 id=customized-verilator-tools-for-improving-fpgaaisc-and-hardware-design-workflows>Customized Verilator tools for improving FPGA/AISC and hardware design workflows</h2>
<p>Antmicro develops a wide range of specialized tools that improve collaborative workflows, and helps customers integrate Verilator into their existing workflows. Adopting Verilator for ASIC simulation and verification offers the advantage of infinite cloud scaling, <a href=https://antmicro.com/blog/2022/11/scaling-verilator-for-very-large-designs/>especially for very large designs</a>.</p>
<p>Get in touch at <a href=mailto:contact@antmicro.com>contact@antmicro.com</a> to find out more about how Antmicro can help you adopt Verilator and other open source tools to increase the productivity of your ASIC design teams.</p>
</div>
</article>
</div>
</div>
</div>
</section>
<section class="blog-related position-relative">
<div class=container>
<div class=row>
<div class=col-md-12>
<div class=blog-section>
<h2 class=blog-section-title>Recent News</h2>
</div>
</div>
</div>
<div class=row>
<div class="col-lg-4 col-md-6">
<article class=blog-post>
<div class=blog-post-thumb>
<a href=/preview/145/news/initial-assertion-control-support-in-verilator/>
<img src=https://chipsalliance.org/preview/145/news/initial-assertion-control-support-in-verilator/verilator-assertcontrol-chipsalliance-blog.png alt=blog-thumb loading=lazy>
</a>
</div>
<div class=blog-post-content>
<div class=blog-post-tag>
<a href=https://chipsalliance.org/preview/145/categories/blog>Blog</a>
</div>
<div class=blog-post-date>
June 21, 2024
</div>
<div class=blog-post-title>
<a href=/preview/145/news/initial-assertion-control-support-in-verilator/>Initial assertion control support in Verilator</a>
</div>
</div>
</article>
</div>
<div class="col-lg-4 col-md-6">
<article class=blog-post>
<div class=blog-post-thumb>
<a href=/preview/145/news/speeding-up-openroad-for-fast-design-feedback/>
<img src=https://chipsalliance.org/preview/145/news/speeding-up-openroad-for-fast-design-feedback/Speeding-up-OpenROAD-optimizations-blog-1.png alt=blog-thumb loading=lazy>
</a>
</div>
<div class=blog-post-content>
<div class=blog-post-tag>
<a href=https://chipsalliance.org/preview/145/categories/blog>Blog</a>
</div>
<div class=blog-post-date>
May 24, 2024
</div>
<div class=blog-post-title>
<a href=/preview/145/news/speeding-up-openroad-for-fast-design-feedback/>Speeding Up OpenROAD For Fast Design Feedback</a>
</div>
</div>
</article>
</div>
<div class="col-lg-4 col-md-6">
<article class=blog-post>
<div class=blog-post-thumb>
<a href=/preview/145/news/adding-physical-memory-protection-to-the-veer-el2-risc-v-core/>
<img src=https://chipsalliance.org/preview/145/news/adding-physical-memory-protection-to-the-veer-el2-risc-v-core/pmp-thumbnail.png alt=blog-thumb loading=lazy>
</a>
</div>
<div class=blog-post-content>
<div class=blog-post-tag>
<a href=https://chipsalliance.org/preview/145/categories/blog>Blog</a>
</div>
<div class=blog-post-date>
March 25, 2024
</div>
<div class=blog-post-title>
<a href=/preview/145/news/adding-physical-memory-protection-to-the-veer-el2-risc-v-core/>Adding Physical Memory Protection to the VeeR EL2 RISC-V Core</a>
</div>
</div>
</article>
</div>
</div>
</div>
</section>
<footer class="footer pt-xxl-19 pt-8 pb-sm-7 pb-5" id=footer>
<div class=container-fluid>
<div class=footer-wrapper>
<div class=row>
<div class="col-12 col-lg-4 me-auto order-2 order-lg-1">
<div class="footer-logo mt-7 mt-md-0 mb-5">
<a href=/preview/145/>
<img src=/preview/145/images/chips-logo-white.svg alt=logo>
</a>
</div>
<div class=social-icon>
<ul class=list-unstyled>
<li>
<a href=https://twitter.com/chipsalliance> <i class=ph-twitter-logo></i> </a>
</li>
<li>
<a href=https://github.com/chipsalliance> <i class=ph-github-logo></i> </a>
</li>
<li>
<a href=https://www.linkedin.com/company/chipsalliance/> <i class=ph-linkedin-logo></i> </a>
</li>
</ul>
</div>
<div class="footer-logo mt-7 mt-md-0">
<p>
© Copyright <span>2024</span> CHIPS Alliance
The Linux Foundation® . All rights reserved. The Linux Foundation has registered trademarks and uses trademarks. For a list of trademarks of The Linux Foundation, please see our <a href=https://www.linuxfoundation.org/trademark-usage>Trademark Usage</a> page. Linux is a registered trademark of Linus Torvalds. <a href=http://www.linuxfoundation.org/privacy>Privacy Policy</a> and <a href=http://www.linuxfoundation.org/terms>Terms of Use</a>.
</p>
</div>
</div>
<div class="col-6 col-md-4 col-sm-4 col-lg-2 order-1">
<div class=footer-widget>
<h3>About</h3>
<ul class=list-unstyled>
<li>
<a href=/preview/145/about/who-we-are/>Who We Are</a>
</li>
<li>
<a href=/preview/145/about/members/>Members</a>
</li>
<li>
<a href=https://members.chipsalliance.org/>Member Support</a>
</li>
<li>
<a href=/preview/145/about/governance/>Governance</a>
</li>
<li>
<a href=/preview/145/about/faq/>FAQ</a>
</li>
<li>
<a href=/preview/145/about/contact/>Contact</a>
</li>
</ul>
</div>
</div>
<div class="col-6 col-md-4 col-sm-4 col-lg-2 order-1">
<div class=footer-widget>
<h3>Community</h3>
<ul class=list-unstyled>
<li>
<a href=/preview/145/projects/>Projects</a>
</li>
<li>
<a href=/preview/145/getting-started/>Getting Started</a>
</li>
<li>
<a href=/preview/145/events/>Events</a>
</li>
<li>
<a href=/preview/145/workgroups/>Workgroups</a>
</li>
</ul>
</div>
</div>
<div class="col-6 col-md-4 col-sm-4 col-lg-2 order-1">
<div class=footer-widget>
<h3>News</h3>
<ul class=list-unstyled>
<li>
<a href=/preview/145/categories/announcements/>Announcements</a>
</li>
<li>
<a href=/preview/145/categories/blog/>Blog</a>
</li>
<li>
<a href=/preview/145/categories/reports/>Reports</a>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</footer>
<script src=/preview/145/vendor/jQuery/jquery.min.js></script>
<script src=/preview/145/vendor/bootstrap/bootstrap.bundle.min.js></script>
<script src=/preview/145/vendor/counter-up/countup.js></script>
<script src=/preview/145/vendor/magnific-popup/magnific-popup.min.js></script>
<script src=/preview/145/js/script.js></script>
</body>
</html>