<!doctype html><html lang=en-us>
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=5">
<link href=/chips-alliance-website/vendor/bootstrap/bootstrap.min.css rel=stylesheet>
<link href=/chips-alliance-website/vendor/phosphor-icons/css/phosphor.css rel=stylesheet>
<link href=/chips-alliance-website/vendor/magnific-popup/magnific-popup.css rel=stylesheet>
<link rel=stylesheet href=/chips-alliance-website/scss/theme.min.6acdbf6d7ff6028452fa93651ecc8b4d52f540d4d3bd7441a2c1d75b82afddf9.css>
<link rel=icon href=/chips-alliance-website/images/favicon/cropped-favicon-1-32x32.png sizes=32x32>
<link rel=icon href=/chips-alliance-website/images/favicon/cropped-favicon-1-192x192.png sizes=192x192>
<link rel=apple-touch-icon href=/chips-alliance-website/images/favicon/cropped-favicon-1-180x180.png>
<meta name=msapplication-TileImage content="/chips-alliance-website/images/favicon/cropped-favicon-1-270x270.png">
<script src=https://cmp.osano.com/16A0DbT9yDNIaQkvZ/3b49aaa9-15ab-4d47-a8fb-96cc25b5543c/osano.js></script>
<title>GitHub Actions Self-hosted Runners, Build Event Server and Google Cloud | CHIPS Alliance</title>
<meta name=description content="This post was originally published at Antmicro.
Continuous Integration and smart lifecycle management are key for high-tech product development, which …">
<meta property="og:title" content="GitHub Actions Self-hosted Runners, Build Event Server and Google Cloud">
<meta property="og:description" content="This post was originally published at Antmicro.
Continuous Integration and smart lifecycle management are key for high-tech product development, which is often a complex and multi-faceted process that requires automation to be efficient and failure-proof. At Antmicro, we’ve been creating various open source cloud and hybrid cloud solutions for our customers, helping them to encapsulate the complexity of their software stack. Lots of those projects cross the hardware/software boundary and involve a mix of open source and proprietary code, which means that fine-grained control of the CI setups are needed to make them work.">
<meta property="og:type" content="article">
<meta property="og:url" content="https://chipsalliance.github.io/chips-alliance-website/news/github-actions-self-hosted-runners-build-event-server-and-google-cloud/"><meta property="og:image" content="https://chipsalliance.github.io/chips-alliance-website/images/blog-share.jpg"><meta property="article:section" content="news">
<meta property="article:published_time" content="2021-03-16T00:00:00+00:00">
<meta property="article:modified_time" content="2021-03-16T00:00:00+00:00"><meta property="og:site_name" content="CHIPS Alliance">
<meta itemprop=name content="GitHub Actions Self-hosted Runners, Build Event Server and Google Cloud">
<meta itemprop=description content="This post was originally published at Antmicro.
Continuous Integration and smart lifecycle management are key for high-tech product development, which is often a complex and multi-faceted process that requires automation to be efficient and failure-proof. At Antmicro, we’ve been creating various open source cloud and hybrid cloud solutions for our customers, helping them to encapsulate the complexity of their software stack. Lots of those projects cross the hardware/software boundary and involve a mix of open source and proprietary code, which means that fine-grained control of the CI setups are needed to make them work."><meta itemprop=datePublished content="2021-03-16T00:00:00+00:00">
<meta itemprop=dateModified content="2021-03-16T00:00:00+00:00">
<meta itemprop=wordCount content="795"><meta itemprop=image content="https://chipsalliance.github.io/chips-alliance-website/images/blog-share.jpg">
<meta itemprop=keywords content><meta name=twitter:card content="summary_large_image">
<meta name=twitter:image content="https://chipsalliance.github.io/chips-alliance-website/images/blog-share.jpg">
<meta name=twitter:title content="GitHub Actions Self-hosted Runners, Build Event Server and Google Cloud">
<meta name=twitter:description content="This post was originally published at Antmicro.
Continuous Integration and smart lifecycle management are key for high-tech product development, which is often a complex and multi-faceted process that requires automation to be efficient and failure-proof. At Antmicro, we’ve been creating various open source cloud and hybrid cloud solutions for our customers, helping them to encapsulate the complexity of their software stack. Lots of those projects cross the hardware/software boundary and involve a mix of open source and proprietary code, which means that fine-grained control of the CI setups are needed to make them work.">
<meta name=twitter:site content="@chipsalliance">
</head>
<body>
<header>
<div class="lfprojects position-fixed">
<a href=https://www.linuxfoundation.org/projects target=_blank rel="noopener noreferrer"><img src=/chips-alliance-website/images/lf-projects-banner-white.svg></a>
</div>
<nav class="navbar navbar-expand-lg position-fixed w-100 zindex-dropdown" id=mainnavigationBar>
<a class=navbar-brand href=/chips-alliance-website/>
<img src=/chips-alliance-website/images/chips_alliance.svg alt=Nav-Logo>
</a>
<button class=navbar-toggler type=button data-bs-toggle=collapse data-bs-target=#navbarSupportedContent aria-controls=navbarSupportedContent aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-default><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><line x1="3.5" y1="5.5" x2="21.5" y2="5.5" stroke="#292d32" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/><line x1="4.5" y1="12.5" x2="21.5" y2="12.5" stroke="#292d32" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/><line x1="11.5" y1="19.5" x2="21.5" y2="19.5" stroke="#292d32" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/></svg>
</span>
<span class=navbar-toggler-toggled><svg width="20" height="20" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M21.5 6.5l-15 15" stroke="#404152" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/><path d="M21.5 21.5l-15-15" stroke="#404152" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/></svg>
</span>
</button>
<div class="collapse navbar-collapse" id=navbarSupportedContent>
<ul class="navbar-nav mx-auto mb-20 mb-lg-0 navbar-nav-scroll">
<li class="nav-item dropdown">
<a class="nav-link dropdown-toggle" data-toggle=dropdown aria-haspopup=true aria-expanded=false href=/chips-alliance-website/#>
About
</a>
<div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink>
<a class=dropdown-item href=/chips-alliance-website/about/who-we-are/>Who We Are</a>
<a class=dropdown-item href=/chips-alliance-website/getting-started/>Getting Started</a>
<a class=dropdown-item href=/chips-alliance-website/about/members/>Members</a>
<a class=dropdown-item href=/chips-alliance-website/about/governance/>Governance</a>
<a class=dropdown-item href=/chips-alliance-website/about/faq/>FAQ</a>
<a class=dropdown-item href=/chips-alliance-website/about/contact/>Contact</a>
</div>
</li>
<li class=nav-item>
<a class=nav-link href=/chips-alliance-website/projects/>
Projects
</a>
</li>
<li class=nav-item>
<a class=nav-link href=/chips-alliance-website/events/>
Events
</a>
</li>
<li class=nav-item>
<a class=nav-link href=/chips-alliance-website/workgroups/>
Workgroups
</a>
</li>
<li class="nav-item dropdown">
<a class="nav-link dropdown-toggle" data-toggle=dropdown aria-haspopup=true aria-expanded=false href=#>
News
</a>
<div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink>
<a class=dropdown-item href=/chips-alliance-website/categories/announcements/>Announcements</a>
<a class=dropdown-item href=/chips-alliance-website/categories/blog/>Blog</a>
<a class=dropdown-item href=/chips-alliance-website/categories/reports/>Reports</a>
</div>
</li>
<li class=nav-item>
<a class=nav-link href=/chips-alliance-website/join/>
Join
</a>
</li>
</ul>
</div>
<div class="d-none d-lg-block">
<div class=nav-item>
<a href=/chips-alliance-website/getting-started/ class="btn btn-sm btn-primary">Get Started</a>
</div>
</div>
</nav>
</header>
<section class=blog-details>
<div class=container>
<div class=row>
<div class=col-lg-12>
<article class=blog-single>
<div class=inner-blog-details>
<h1>GitHub Actions Self-hosted Runners, Build Event Server and Google Cloud</h1>
<div class=inner-blog-details-meta>
<ul class=list-unstyled>
<li class=list-inline-item>
<p>March 16, 2021</p>
</li>
<li class=list-inline-item>
<p>4 <span>minutes</span></p>
</li>
<li class=list-inline-item>
<p>795 <span>words</span></p>
</li>
</ul>
</div>
</div>
<div class="rounded-box mb-xxl-11 mb-8">
<img src=https://chipsalliance.github.io/chips-alliance-website/images/blog-share.jpg class=w-100 alt=featured-image>
</div>
<div><p><em>This post was originally published at <a href=https://antmicro.com/blog/2021/03/github-actions-self-hosted-runners/>Antmicro</a>.</em></p>
<p>Continuous Integration and smart lifecycle management are key for high-tech product development, which is often a complex and multi-faceted process that requires automation to be efficient and failure-proof. At Antmicro, we’ve been creating various open source cloud and hybrid cloud solutions for our customers, helping them to encapsulate the complexity of their software stack. Lots of those projects cross the hardware/software boundary and involve a mix of open source and proprietary code, which means that fine-grained control of the CI setups are needed to make them work.</p>
<p>To provide the level of flexibility that we and our customers require, we often find ourselves working extensively on the underlying CI infrastructure, building open source solutions that can scale between organizations and teams. One such project involved creating a custom, local GitHub Actions runner, with containerized builds, support for Google’s Build Event Server and workload measurement and analytics; in collaboration with Google we then also enabled running an identical setup with the extra capabilities in Google Cloud.</p>
<p><img src=self-hosted-runners.png alt="Self-hosted runner diagram"></p>
<h2 id=custom-runner-more-applications>Custom runner, more applications</h2>
<p>GitHub is the world’s largest open source code sharing space, home to many of our open source projects such as Renode, the open source FPGA toolchain <a href=https://github.com/SymbiFlow>SymbiFlow</a> or our <a href=https://antmicro.com/blog/2020/12/ibex-support-in-verilator-yosys-via-uhdm-surelog/>open source ASIC development-focused SystemVerilog work</a>. GitHub Actions – used by millions of developers worldwide – is a natural choice for those projects as the go-to CI flow. However, by default it provides compute resources – in the CI world traditionally called runners – with a <a href=https://docs.github.com/en/actions/using-github-hosted-runners/about-github-hosted-runners#supported-runners-and-hardware-resources>specific hardware configuration</a> which does not always fit the needs of the workloads that we deal with.</p>
<p>Especially in our work that involves ASIC and FPGA development flows – working towards enabling fully open source chip and IP design in our broader work in collaboration with our customers and fellow CHIPS Alliance members such as Google, Western Digital and QuickLogic, we find ourselves needing hybrid setups which would allow us to keep the code as well as the CI definitions public while being able to rely on internal infrastructure to do the heavy lifting. Long-running builds involving tools like <a href=https://verilogtorouting.org/>VtR</a> or <a href=https://github.com/The-OpenROAD-Project/OpenROAD>OpenROAD</a> that use lots of memory and CPU power, can greatly benefit from the flexibility that comes with the use of custom, self-hosted runners, and this solution also gives you a high degree of freedom in terms of integrating your runner with external hardware or tools that can’t be shared publicly. The latter is especially helpful in some of our other open source projects for things like benchmarking <a href=https://antmicro.com/blog/2020/09/automatic-cpu-testing-with-embench/>RISC-V, OpenPOWER and other cores</a> or <a href=https://github.com/SymbiFlow/fpga-tool-perf>tracking the QoR for your FPGA designs</a>. The Quality of Results and flexible Continuous Integration elements are extremely important for custom engineering projects we embark on, which typically integrate a variety of open source components together – fortunately the very nature of open source that constitute the predominant part of the tools we use makes such work much easier.</p>
<h2 id=virtual-machines-distant-bes-and-google-cloud-integration>Virtual machines, distant-bes and Google Cloud integration</h2>
<p>Our internal and our customers’ needs have called for the ability to integrate on-premise runners into our GitHub CI flows, which can be done using the <a href=https://github.com/actions/runner>GitHub runner</a> project. For many of our projects, we provide flexible development infrastructure based on open source that allows us to better collaborate around shared code and to do that, we need to be able to scale compute resources between the private and public cloud. To enable feature parity with some of internal infrastructure, we also extended the self-hosted runners with some extra features.</p>
<p>Firstly, the custom runners developed as part of the project can be used with our <a href=https://antmicro.com/blog/2021/01/viewing-sharing-test-results-with-distant-bes-client/>distant-bes framework</a> to push results in the Build Event Server format to custom results viewers transparently to the CI run itself. You can see an example of how this works in the <a href=https://github.com/SymbiFlow/symbiflow-examples>symbiflow-examples repository</a>. Secondly, we modified the runner so that instead of running the CI script on bare metal, it spawns virtual machines and performs the run steps inside them, collects results, and kills the machine, without changing the state of the host system’s kernel. This also allows us to gather performance metrics to see what the real utilization of the runner’s resources is – and we push those results in the form of graphs to our BES server.</p>
<p><img src=resource-usage.png alt="Runner&rsquo;s resource utilization"></p>
<p>Lastly, based on the needs of several of our collaborative open source projects with Google, we pursued yet another goal, namely, instantiating our self-hosted runners in Google Cloud, which enables our CI to spin powerful servers up and down on demand. This mix of robust internal infrastructure and always-available, scalable on-demand Google Cloud resources is very useful for heavy workloads run by multiple organizations. In the world of collaborative development in forums like the CHIPS Alliance and RISC-V International, this is no longer a nice-to-have, but a necessity.</p>
</div>
</article>
</div>
</div>
</div>
</section>
<section class="blog-related position-relative">
<div class=container>
<div class=row>
<div class=col-md-12>
<div class=blog-section>
<h2 class=blog-section-title>Recent News</h2>
</div>
</div>
</div>
<div class=row>
<div class="col-lg-4 col-md-6">
<article class=blog-post>
<div class=blog-post-thumb>
<a href=/chips-alliance-website/news/chips-alliance-welcomes-the-caliptra-open-source-root-of-trust-project/>
<img src=https://chipsalliance.github.io/chips-alliance-website/news/chips-alliance-welcomes-the-caliptra-open-source-root-of-trust-project/share.png alt=blog-thumb loading=lazy>
</a>
</div>
<div class=blog-post-content>
<div class=blog-post-tag>
<a href=https://chipsalliance.github.io/chips-alliance-website/categories/announcements>Announcements</a>
</div>
<div class=blog-post-date>
December 13, 2022
</div>
<div class=blog-post-title>
<a href=/chips-alliance-website/news/chips-alliance-welcomes-the-caliptra-open-source-root-of-trust-project/>CHIPS Alliance Welcomes the Caliptra Open Source Root of Trust Project</a>
</div>
</div>
</article>
</div>
<div class="col-lg-4 col-md-6">
<article class=blog-post>
<div class=blog-post-thumb>
<a href=/chips-alliance-website/news/joint-analog-workgroup-mos-ak-panel-session/>
<img src=https://chipsalliance.github.io/chips-alliance-website/news/joint-analog-workgroup-mos-ak-panel-session/share.png alt=blog-thumb loading=lazy>
</a>
</div>
<div class=blog-post-content>
<div class=blog-post-tag>
<a href=https://chipsalliance.github.io/chips-alliance-website/categories/blog>Blog</a>
</div>
<div class=blog-post-date>
December 5, 2022
</div>
<div class=blog-post-title>
<a href=/chips-alliance-website/news/joint-analog-workgroup-mos-ak-panel-session/>Joint Analog Workgroup / MOS-AK Panel Session</a>
</div>
</div>
</article>
</div>
<div class="col-lg-4 col-md-6">
<article class=blog-post>
<div class=blog-post-thumb>
<a href=/chips-alliance-website/news/chips-alliance-fall-2022-technology-update-december-15/>
<img src=https://chipsalliance.github.io/chips-alliance-website/news/chips-alliance-fall-2022-technology-update-december-15/share.png alt=blog-thumb loading=lazy>
</a>
</div>
<div class=blog-post-content>
<div class=blog-post-tag>
<a href=https://chipsalliance.github.io/chips-alliance-website/categories/announcements>Announcements</a>
</div>
<div class=blog-post-date>
December 1, 2022
</div>
<div class=blog-post-title>
<a href=/chips-alliance-website/news/chips-alliance-fall-2022-technology-update-december-15/>CHIPS Alliance Fall 2022 Technology Update December 15</a>
</div>
</div>
</article>
</div>
</div>
</div>
</section>
<footer class="footer pt-xxl-19 pt-8 pb-sm-7 pb-5" id=footer>
<div class=container-fluid>
<div class=footer-wrapper>
<div class=row>
<div class="col-12 col-lg-4 me-auto order-2 order-lg-1">
<div class="footer-logo mt-7 mt-md-0 mb-5">
<a href=/chips-alliance-website/>
<img src=/chips-alliance-website/images/chips-logo-white.svg alt=logo>
</a>
</div>
<div class=social-icon>
<ul class=list-unstyled>
<li>
<a href=https://twitter.com/chipsalliance> <i class=ph-twitter-logo></i> </a>
</li>
<li>
<a href=https://github.com/chipsalliance> <i class=ph-github-logo></i> </a>
</li>
<li>
<a href=https://www.linkedin.com/company/chipsalliance/> <i class=ph-linkedin-logo></i> </a>
</li>
</ul>
</div>
<div class="footer-logo mt-7 mt-md-0">
<p>
© Copyright <span>2023</span> CHIPS Alliance
The Linux Foundation® . All rights reserved. The Linux Foundation has registered trademarks and uses trademarks. For a list of trademarks of The Linux Foundation, please see our <a href=https://www.linuxfoundation.org/trademark-usage>Trademark Usage</a> page. Linux is a registered trademark of Linus Torvalds. <a href=http://www.linuxfoundation.org/privacy>Privacy Policy</a> and <a href=http://www.linuxfoundation.org/terms>Terms of Use</a>.
</p>
</div>
</div>
<div class="col-6 col-md-4 col-sm-4 col-lg-2 order-1">
<div class=footer-widget>
<h3>About</h3>
<ul class=list-unstyled>
<li>
<a href=/chips-alliance-website/about/who-we-are/>Who We Are</a>
</li>
<li>
<a href=/chips-alliance-website/about/members/>Members</a>
</li>
<li>
<a href=/chips-alliance-website/about/governance/>Governance</a>
</li>
<li>
<a href=/chips-alliance-website/about/faq/>FAQ</a>
</li>
<li>
<a href=/chips-alliance-website/about/contact/>Contact</a>
</li>
</ul>
</div>
</div>
<div class="col-6 col-md-4 col-sm-4 col-lg-2 order-1">
<div class=footer-widget>
<h3>Community</h3>
<ul class=list-unstyled>
<li>
<a href=/chips-alliance-website/getting-started/>Getting Started</a>
</li>
<li>
<a href=/chips-alliance-website/projects/>Projects</a>
</li>
<li>
<a href=/chips-alliance-website/events/>Events</a>
</li>
<li>
<a href=/chips-alliance-website/workgroups/>Workgroups</a>
</li>
</ul>
</div>
</div>
<div class="col-6 col-md-4 col-sm-4 col-lg-2 order-1">
<div class=footer-widget>
<h3>News</h3>
<ul class=list-unstyled>
<li>
<a href=/chips-alliance-website/categories/announcements/>Announcements</a>
</li>
<li>
<a href=/chips-alliance-website/categories/blog/>Blog</a>
</li>
<li>
<a href=/chips-alliance-website/categories/reports/>Reports</a>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</footer>
<script src=/chips-alliance-website/vendor/jQuery/jquery.min.js></script>
<script src=/chips-alliance-website/vendor/bootstrap/bootstrap.bundle.min.js></script>
<script src=/chips-alliance-website/vendor/counter-up/countup.js></script>
<script src=/chips-alliance-website/vendor/magnific-popup/magnific-popup.min.js></script>
<script src=/chips-alliance-website/js/script.js></script>
</body>
</html>